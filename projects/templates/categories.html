<!doctype html>
<html lang="en">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
{% load mptt_tags %}
</head>
<body>
<ul>
    {% recursetree categories %}
        <li class="list-group">
            {{ node.name }} <a class="add-category-button">+</a>
            <div class="add-category-form">
                <form action="/categories/add/" class="form-inline" method="post">
                    {% csrf_token %}
                    <input name="category_name" class="form-control" type="text" value="">
                    <input name="parent_id" type="hidden" value="{{ node.id }}">
                    <input class="btn btn-primary" type="submit" value="+">
                </form>
            </div>
            {% if not node.is_leaf_node %}
                <ul class="children list-group-item">
                    {{ children }}
                </ul>
            {% endif %}
        </li>
    {% endrecursetree %}
</ul>
<script>
    $(function() {
        $(".add-category-form").hide();
        $(".add-category-button").on("click", function() {
            $(this).siblings(".add-category-form").toggle();
        });
    });
</script>
</body>
</html>
